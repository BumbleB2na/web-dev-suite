///////////////////////////////////////////////////////////////////////
// Html jQuery ShortenSelect Plugin - v1.0 - uses JavaScript, jQuery and Modernizr
//  - tested with and requires jQuery 1.7.1 and Modernizr 2.0.6
//
// Requirements:  jQuery (v1.7.1), Modernizr (for safe use of min-width and min-height css styles)
//
// Author: BumbleB2na - Copyright (c) 2012 Brendan Barr
//
// *** You are permitted to re-use this code for your own personal or commercial use, just include this comment block ***
//
// This file is part of BumbleB2na's Web Dev Suite.
//    BumbleB2na's Web Dev Suite is free software: you can redistribute it 
//    and/or modify it under the terms of the GNU General Public License as 
//    published by the Free Software Foundation, either version 3 of the 
//    License, or (at your option) any later version.
//
//    BumbleB2na's Web Dev Suite is distributed in the hope that it will be 
//    useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License
//    along with BumbleB2na's Web Dev Suite.  If not, 
//    see <http://www.gnu.org/licenses/>.
///////////////////////////////////////////////////////////////////////
(function(a){a.fn.shortenSelect=function(c){var c=c||{};var b=function(e){var f=e.data("maxWidth")||e.css("max-width")||0;if(parseInt(f)==0||f.toString()=="auto"){f=e.width()+"px"}return f};var d=function(e){$.each(e.find("option"),function(g,f){$optionElement=$(f);var h=($optionElement.data("shortenedOnce")==undefined)?$optionElement.text():$optionElement.attr("title")||$optionElement.text();$optionElement.attr("title",h);$optionElement.data("shortenedOnce","true");var i=(parseInt(e.css("max-width"))/7.3);if(h.length>i){$optionElement.text("... "+h.substring((h.length-i),h.length))}else{$optionElement.text(h)}})};return a(this).each(function(){$this=a(this);if(c.maxWidth!==typeof"undefined"){if(c.maxWidth===typeof"int"){c.maxWidth=c.maxWidth.toString()+"px"}}var e=c.maxWidth||b($this);if(parseInt($this.css("max-width"))==0||$this.css("max-width").toString()=="auto"){$this.css("max-width",e)}d($this)})}})(jQuery);